Ch 2: Understanding High Availability and Disaster Recovery Technologies
***************************************************************************

SQL Server provides a full suite of technologies for implementing high availability and disaster recovery. 

AlwaysOn Failover Clustering
------------------------------

--------------------------------- 2 Node cluster configurations ---------------------------------------

Active-Passive Configuration (2 Node cluster)
...............................
Two-Node Cluster (Active/Passive Configuration) : https://drive.google.com/file/d/1IDgXcutPmkLe_wVvHZxI-1lGIWFmYKaP/view?usp=drive_link

- A Windows cluster is a high availability Technology in which a group of up to 64 servers works together to provide redundancy.
- An AlwaysOn Failover Clustered Instance (FCI) is an instance of SQL Server that spans the servers within this group. If one of the servers within this group fails, another server takes ownership of the instance.
- Each server within a cluster is called a node.
- Each node within the cluster also shares the same storage for the SQL Server data and log files. (The storage, however, is only attached to the active node.)
- Each node has SQL server binaries installed seperately.
- If the active node fails, then the SQL Server service is stopped and the storage is detached. The storage is then reattached to one of the other nodes in the cluster, and the SQL Server service is started on this node, which is now the active node.


Active-Active Configuration (Load-Balancing)
.................................................
Two-Node Cluster (Active/Active Configuration)  : https://drive.google.com/file/d/1cgRCL7EkOZ-H_Mj0hfQeiyzdio_AqsTr/view?usp=drive_link

- it is possible to install multiple instances on a cluster, and a different node may own each instance.
- Therefore in the above picture , in an active/active configuration, during normal operations, Node1 may host Instance1 and Node2 may host Instance2. If Node1 fails, both instances are then hosted by Node2, and vice-versa. 
- Caution  
>>>>>>>>>
In an active/active cluster, it is important to consider resources in the event of failover. 
For example, if each node in a cluster group has 128GB of RAM and the instance hosted on each node is configured to use 96GB of RAM and locking pages in memory, then when one node fails over to the other node, this node fails as well, because it does not have enough memory to allocate to both instances. Make sure you plan both memory and processor requirements as if the two nodes are a single server. For this reason, active/active clusters are not generally recommended for SQL Server.




----------------------------- 3-Plus Node Configurations -----------------------------------

When you have 3 or more nodes, it is unlikely that you will want to have a single active node and two redundant nodes, due to the associated costs. Instead, you can choose to implement an N+1 or N+M configuration.
In an N+1 configuration, you have multiple active nodes and a single passive node. If a failure occurs on any of the active nodes, they fail over to the passive node.

The diagram below depicts a three-node N+1 cluster (where N: No of Active Nodes, 1: only 1 Passive Node. any failure in active node, will result in failover to passive node, provided the passive node has enough resources to handle workloads)
https://drive.google.com/file/d/1m-RqZhtxG8L85gA1PwS1nldQO50N5FyS/view?usp=sharing

The diagram below depicts a three-node N+M cluster. (where N: No of Active Nodes, M: Many Passive Nodes. The diagram shows that Instance3 is configured to always fail over to one of the passive nodes, whereas Instance1 and Instance2 are configured to always fail over to the other passive node. we can also configure the cluster to allow any of the active nodes to fail over to either of the passive nodes )
https://drive.google.com/file/d/152zq4TVMvyRkjamC_42jdyyvMiNp-fmo/view?usp=sharing


Quorum
---------




























